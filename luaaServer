
local replicatedStorage = game:GetService("ReplicatedStorage")
local httpService = game:GetService("HttpService")
local dataStoreService = game:GetService("DataStoreService")
local dataStore = dataStoreService:GetDataStore("data")

pcall(function()
replicatedStorage.Events.Luaa.Libraries.http.HTTPRequestEvent.OnServerEvent:Connect(function(player, url, data, headers, method)
if method == "GET" or "DELETE" then
local result = httpService:RequestAsync({
Method = method,			
Headers = headers,
Url = url
})
replicatedStorage.Events.Luaa.Libraries.http.HTTPRequestEvent:FireClient(player, result)
elseif method == "POST" or "PATCH" or "PUT" then
local result = httpService:RequestAsync({
Method = method,
Headers = headers,
Body = data,
Url = url,
})
replicatedStorage.Events.Luaa.Libraries.http.HTTPRequestEvent:FireClient(player, result)
else			
error("Unsupported or invalid HTTP method.")			
       end
    end)
end)
